<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Copilot 1СО</title>
    <link rel="icon"
        href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><title>SOS Icon (Red)</title><defs><style>.sos-text{font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";font-size:12px;font-weight:bold;text-anchor:middle;dominant-baseline:central;fill:%23DC2626;letter-spacing:-0.5px}.frame{fill:none;stroke:%23DC2626;stroke-width:2}</style></defs><rect x="4" y="4" width="24" height="24" rx="4" class="frame"/><text x="16" y="16" class="sos-text">SOS</text></svg>'>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.14.0/Sortable.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: 'var(--color-primary, #5D5CDE)',
                        secondary: 'var(--color-secondary, #4B4AB2)', blue: {
                            ...tailwind.colors.blue,
                            DEFAULT: 'var(--color-primary, #5D5CDE)',
                        },
                    },

                    borderRadius: {
                        'none': '0px',
                        'sm': 'calc(var(--border-radius, 8px) * 0.5)',
                        'DEFAULT': 'var(--border-radius, 8px)',
                        'md': 'calc(var(--border-radius, 8px) * 0.75)',
                        'lg': 'calc(var(--border-radius, 8px) * 1.25)',
                        'xl': 'calc(var(--border-radius, 8px) * 1.75)',
                        '2xl': 'calc(var(--border-radius, 8px) * 2.25)',
                        '3xl': 'calc(var(--border-radius, 8px) * 3.0)',
                        'full': '9999px',
                    },

                    spacing: {
                        'content': 'var(--content-spacing, 1rem)',
                        'content-sm': 'calc(var(--content-spacing, 1rem) * 0.75)',
                        'content-lg': 'calc(var(--content-spacing, 1rem) * 1.5)',
                    },

                    gap: (theme) => ({
                        ...theme('spacing'),
                    }),

                    padding: (theme) => ({
                        ...theme('spacing'),
                    }),

                    margin: (theme) => ({
                        ...theme('spacing'),
                    }),
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ======================================== */
        /*               Переменные                 */
        /* ======================================== */
        :root {
            --color-primary-default: #5D5CDE;
            --search-highlight-text-bg-light: #fff352;
            --search-highlight-text-color-light: #333333;
            --search-highlight-text-bg-dark: #FFD700;
            --search-highlight-text-color-dark: #1a1a1a;
            --exact-match-border-color-light: #28a745;
            --exact-match-border-color-dark: #38c172;
            --element-highlight-bg-light: rgba(255, 220, 100, 0.2);
            --element-highlight-outline-light: rgba(255, 180, 50, 0.5);
            --element-highlight-bg-dark: rgba(184, 134, 11, 0.25);
            --element-highlight-outline-dark: rgba(218, 165, 32, 0.6);
            --scrollbar-track-color-light: #f0f0f0;
            --scrollbar-track-color-dark: #2a2a2e;
            --scrollbar-thumb-opacity: 0.65;
            --scrollbar-thumb-hover-opacity: 0.85;
        }

        html {
            height: 100%;
        }

        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }


        /* ======================================== */
        /*           Стили для сортировки           */
        /* ======================================== */
        .my-sortable-ghost {
            background-color: #d1d5db;
            opacity: 0.75;
            border-radius: 0.375rem;
        }

        .dark .my-sortable-ghost {
            background-color: #4b5563;
        }


        /* ======================================== */
        /*           Кастомизация UI                */
        /* ======================================== */
        .color-swatch.ring-primary {
            --tw-ring-color: var(--color-primary, var(--color-primary-default));
        }


        /* ======================================== */
        /*      Полноэкранный режим модальных окон  */
        /* ======================================== */
        .is-fullscreen {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            max-width: none !important;
            max-height: none !important;
            z-index: 90 !important;
            padding: 0 !important;
            overflow: hidden !important;
        }

        .is-fullscreen>.bg-white,
        .is-fullscreen>.dark\:bg-gray-800 {
            border-radius: 0 !important;
            height: 100% !important;
            width: 100% !important;
            display: flex !important;
            flex-direction: column !important;
        }

        .is-fullscreen .modal-content-area-fullscreen-scroll,
        .is-fullscreen #algorithmSteps,
        .is-fullscreen #hotkeysModal .p-6.overflow-y-auto.flex-1,
        .is-fullscreen #reglamentModal .modal-content-area,
        .is-fullscreen #extLinkModal .modal-content-area,
        .is-fullscreen #cibLinkModal .modal-content-area,
        .is-fullscreen #bookmarkModal .p-content.overflow-y-auto.flex-1,
        .is-fullscreen #bookmarkDetailModal #bookmarkDetailOuterContent,
        .is-fullscreen #addModal .p-content.overflow-y-auto.flex-1,
        .is-fullscreen #editModal .p-content.overflow-y-auto.flex-1 {
            flex-grow: 1;
            overflow-y: auto;
            min-height: 0;
        }

        .is-fullscreen .edit-step .step-desc {
            min-height: 150px;
        }


        /* ======================================== */
        /*       Общие стили модальных окон         */
        /* ======================================== */
        body.modal-open {
            overflow: hidden;
        }

        .modal-transition {
            transition-property: opacity, transform;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 200ms;
            opacity: 0;
            transform: scale(0.95);
        }

        .modal-visible {
            opacity: 1;
            transform: scale(1);
        }

        #algorithmModal,
        #editModal,
        #addModal,
        #customizeUIModal,
        #confirmClearDataModal,
        #cibLinkModal,
        #hotkeysModal,
        #screenshotLightbox,
        #screenshotViewerModal,
        #noInnModal,
        #addReglamentCategoryModal,
        #foldersModal,
        #reglamentModal,
        #reglamentDetailModal,
        #bookmarkModal,
        #bookmarkDetailModal,
        #extLinkModal {
            pointer-events: none;
        }

        #algorithmModal:not(.hidden),
        #editModal:not(.hidden),
        #addModal:not(.hidden),
        #customizeUIModal:not(.hidden),
        #confirmClearDataModal:not(.hidden),
        #cibLinkModal:not(.hidden),
        #hotkeysModal:not(.hidden),
        #screenshotLightbox:not(.hidden),
        #screenshotViewerModal:not(.hidden),
        #noInnModal:not(.hidden),
        #addReglamentCategoryModal:not(.hidden),
        #foldersModal:not(.hidden),
        #reglamentModal:not(.hidden),
        #reglamentDetailModal:not(.hidden),
        #bookmarkModal:not(.hidden),
        #bookmarkDetailModal:not(.hidden),
        #extLinkModal:not(.hidden) {
            pointer-events: auto;
        }


        /* ================================================ */
        /*               Кастомный Скроллбар                */
        /* ================================================ */

        :root {
            --scrollbar-track-color-light: rgba(0, 0, 0, 0.05);
            --scrollbar-track-color-dark: rgba(255, 255, 255, 0.05);
        }

        .custom-scrollbar,
        html,
        #searchResults,
        .modal-content-area-fullscreen-scroll,
        #algorithmSteps,
        #hotkeysModal .p-6.overflow-y-auto.flex-1,
        #reglamentModal .modal-content-area,
        #reglamentDetailModal #reglamentDetailContent,
        #extLinkModal .modal-content-area,
        #cibLinkModal .modal-content-area,
        #bookmarkModal .p-content.overflow-y-auto.flex-1,
        #bookmarkDetailModal #bookmarkDetailOuterContent,
        #addModal .p-content.overflow-y-auto.flex-1,
        #editModal .p-content.overflow-y-auto.flex-1,
        #customizeUIModal .p-content.overflow-y-auto.flex-1 {
            scrollbar-width: thin;
            scrollbar-color: var(--scrollbar-thumb-bg) var(--scrollbar-track-color-light);
        }

        .dark .custom-scrollbar,
        html.dark,
        .dark #searchResults,
        .dark .modal-content-area-fullscreen-scroll,
        .dark #algorithmSteps,
        .dark #hotkeysModal .p-6.overflow-y-auto.flex-1,
        .dark #reglamentModal .modal-content-area,
        .dark #reglamentDetailModal #reglamentDetailContent,
        .dark #extLinkModal .modal-content-area,
        .dark #cibLinkModal .modal-content-area,
        .dark #bookmarkModal .p-content.overflow-y-auto.flex-1,
        .dark #bookmarkDetailModal #bookmarkDetailOuterContent,
        .dark #addModal .p-content.overflow-y-auto.flex-1,
        .dark #editModal .p-content.overflow-y-auto.flex-1,
        .dark #customizeUIModal .p-content.overflow-y-auto.flex-1 {
            scrollbar-color: var(--scrollbar-thumb-bg) var(--scrollbar-track-color-dark);
        }

        .custom-scrollbar::-webkit-scrollbar,
        html::-webkit-scrollbar,
        #searchResults::-webkit-scrollbar,
        .modal-content-area-fullscreen-scroll::-webkit-scrollbar,
        #algorithmSteps::-webkit-scrollbar,
        #hotkeysModal .p-6.overflow-y-auto.flex-1::-webkit-scrollbar,
        #reglamentModal .modal-content-area::-webkit-scrollbar,
        #reglamentDetailModal #reglamentDetailContent::-webkit-scrollbar,
        #extLinkModal .modal-content-area::-webkit-scrollbar,
        #cibLinkModal .modal-content-area::-webkit-scrollbar,
        #bookmarkModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar,
        #bookmarkDetailModal #bookmarkDetailOuterContent::-webkit-scrollbar,
        #addModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar,
        #editModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar,
        #customizeUIModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar {
            width: 4px !important;
            height: 4px !important;
        }

        .custom-scrollbar::-webkit-scrollbar-track,
        html::-webkit-scrollbar-track,
        #searchResults::-webkit-scrollbar-track,
        .modal-content-area-fullscreen-scroll::-webkit-scrollbar-track,
        #algorithmSteps::-webkit-scrollbar-track,
        #hotkeysModal .p-6.overflow-y-auto.flex-1::-webkit-scrollbar-track,
        #reglamentModal .modal-content-area::-webkit-scrollbar-track,
        #reglamentDetailModal #reglamentDetailContent::-webkit-scrollbar-track,
        #extLinkModal .modal-content-area::-webkit-scrollbar-track,
        #cibLinkModal .modal-content-area::-webkit-scrollbar-track,
        #bookmarkModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-track,
        #bookmarkDetailModal #bookmarkDetailOuterContent::-webkit-scrollbar-track,
        #addModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-track,
        #editModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-track,
        #customizeUIModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-track {
            background-color: var(--scrollbar-track-color-light);
            border-radius: 15px;
        }

        .dark .custom-scrollbar::-webkit-scrollbar-track,
        html.dark::-webkit-scrollbar-track,
        .dark #searchResults::-webkit-scrollbar-track,
        .dark .modal-content-area-fullscreen-scroll::-webkit-scrollbar-track,
        .dark #algorithmSteps::-webkit-scrollbar-track,
        .dark #hotkeysModal .p-6.overflow-y-auto.flex-1::-webkit-scrollbar-track,
        .dark #reglamentModal .modal-content-area::-webkit-scrollbar-track,
        .dark #reglamentDetailModal #reglamentDetailContent::-webkit-scrollbar-track,
        .dark #extLinkModal .modal-content-area::-webkit-scrollbar-track,
        .dark #cibLinkModal .modal-content-area::-webkit-scrollbar-track,
        .dark #bookmarkModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-track,
        .dark #bookmarkDetailModal #bookmarkDetailOuterContent::-webkit-scrollbar-track,
        .dark #addModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-track,
        .dark #editModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-track,
        .dark #customizeUIModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-track {
            background-color: var(--scrollbar-track-color-dark);
        }

        .custom-scrollbar::-webkit-scrollbar-thumb,
        html::-webkit-scrollbar-thumb,
        #searchResults::-webkit-scrollbar-thumb,
        .modal-content-area-fullscreen-scroll::-webkit-scrollbar-thumb,
        #algorithmSteps::-webkit-scrollbar-thumb,
        #hotkeysModal .p-6.overflow-y-auto.flex-1::-webkit-scrollbar-thumb,
        #reglamentModal .modal-content-area::-webkit-scrollbar-thumb,
        #reglamentDetailModal #reglamentDetailContent::-webkit-scrollbar-thumb,
        #extLinkModal .modal-content-area::-webkit-scrollbar-thumb,
        #cibLinkModal .modal-content-area::-webkit-scrollbar-thumb,
        #bookmarkModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-thumb,
        #bookmarkDetailModal #bookmarkDetailOuterContent::-webkit-scrollbar-thumb,
        #addModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-thumb,
        #editModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-thumb,
        #customizeUIModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-thumb {
            background-color: var(--scrollbar-thumb-bg);
            border-radius: 15px;
            border: 2px solid transparent;
            background-clip: content-box;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover,
        html::-webkit-scrollbar-thumb:hover,
        #searchResults::-webkit-scrollbar-thumb:hover,
        .modal-content-area-fullscreen-scroll::-webkit-scrollbar-thumb:hover,
        #algorithmSteps::-webkit-scrollbar-thumb:hover,
        #hotkeysModal .p-6.overflow-y-auto.flex-1::-webkit-scrollbar-thumb:hover,
        #reglamentModal .modal-content-area::-webkit-scrollbar-thumb:hover,
        #reglamentDetailModal #reglamentDetailContent::-webkit-scrollbar-thumb:hover,
        #extLinkModal .modal-content-area::-webkit-scrollbar-thumb:hover,
        #cibLinkModal .modal-content-area::-webkit-scrollbar-thumb:hover,
        #bookmarkModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-thumb:hover,
        #bookmarkDetailModal #bookmarkDetailOuterContent::-webkit-scrollbar-thumb:hover,
        #addModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-thumb:hover,
        #editModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-thumb:hover,
        #customizeUIModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-thumb:hover {
            background-color: var(--scrollbar-thumb-hover-bg);
        }

        .custom-scrollbar::-webkit-scrollbar-corner,
        html::-webkit-scrollbar-corner,
        #searchResults::-webkit-scrollbar-corner,
        .modal-content-area-fullscreen-scroll::-webkit-scrollbar-corner,
        #algorithmSteps::-webkit-scrollbar-corner,
        #hotkeysModal .p-6.overflow-y-auto.flex-1::-webkit-scrollbar-corner,
        #reglamentModal .modal-content-area::-webkit-scrollbar-corner,
        #reglamentDetailModal #reglamentDetailContent::-webkit-scrollbar-corner,
        #extLinkModal .modal-content-area::-webkit-scrollbar-corner,
        #cibLinkModal .modal-content-area::-webkit-scrollbar-corner,
        #bookmarkModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-corner,
        #bookmarkDetailModal #bookmarkDetailOuterContent::-webkit-scrollbar-corner,
        #addModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-corner,
        #editModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-corner,
        #customizeUIModal .p-content.overflow-y-auto.flex-1::-webkit-scrollbar-corner {
            background: transparent;
        }


        /* ======================================== */
        /*            Стили для Лайтбокса           */
        /* ======================================== */
        #screenshotLightbox img {
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.5);
        }


        /* ======================================== */
        /*      Переходы для Табов и Поиска       */
        /* ======================================== */
        #searchResults {
            transition: opacity 150ms ease-out, transform 150ms ease-out;
            opacity: 0;
            transform: translateY(-10px);
            pointer-events: none;
        }

        #searchResults:not(.hidden) {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }

        .tab-content {
            transition: opacity 150ms ease-in-out;
        }

        .tab-content.fade-out {
            opacity: 0;
        }

        .tab-content.fade-in {
            opacity: 1;
        }


        /* ======================================== */
        /*          Стили для кнопок табов          */
        /* ======================================== */
        .tab-btn {
            padding-left: 0.6rem;
            padding-right: 0.6rem;
            padding-top: 0.4rem;
            padding-bottom: 0.4rem;
            font-size: 0.8rem;
        }

        .tab-btn i {
            margin-right: 0.25rem;
        }

        @media (min-width: 640px) {

            .tab-btn {
                padding-left: 0.75rem;
                padding-right: 0.75rem;
                padding-top: 0.5rem;
                padding-bottom: 0.5rem;
                font-size: 0.875rem;
            }

            .tab-btn i {
                margin-right: 0.35rem;
            }
        }

        #mainTab,
        #programTab,
        #linksTab,
        #extLinksTab,
        #skziTab,
        #lk1cTab,
        #webRegTab,
        #reglamentsTab,
        #bookmarksTab,
        #sedoTypesTab {
            padding-left: 0.4rem;
            padding-right: 0.4rem;
        }


        /* ======================================== */
        /*  Стили для Подсветки Результатов Поиска  */
        /* ======================================== */

        .exact-match-highlight {
            border-left: 4px solid var(--exact-match-border-color-light) !important;
            padding-left: calc(0.75rem - 4px);
            background-color: transparent !important;
        }

        .dark .exact-match-highlight,
        .dark .exact-match-highlight-dark {
            border-left-color: var(--exact-match-border-color-dark) !important;
            background-color: transparent !important;
        }

        .exact-match-highlight:hover {
            background-color: rgba(0, 0, 0, 0.03) !important;
        }

        .dark .exact-match-highlight:hover {
            background-color: rgba(255, 255, 255, 0.04) !important;
        }

        .search-highlight-active {
            background-color: var(--element-highlight-bg-light) !important;
            outline: 2px solid var(--element-highlight-outline-light) !important;
            outline-offset: -2px;
            transition: background-color 0.3s ease-out, outline-color 0.3s ease-out;
            position: relative;
            z-index: 1;
        }

        .dark .search-highlight-active {
            background-color: var(--element-highlight-bg-dark) !important;
            outline-color: var(--element-highlight-outline-dark) !important;
        }

        @keyframes pulse-highlight {
            0% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(255, 180, 50, 0.4);
            }

            50% {
                transform: scale(1.01);
                box-shadow: 0 0 3px 6px rgba(255, 180, 50, 0);
            }

            100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(255, 180, 50, 0);
            }
        }

        .search-highlight-pulse {
            animation: pulse-highlight 1.3s ease-in-out;
        }

        .search-term-highlight,
        mark {
            background-color: var(--search-highlight-text-bg-light);
            color: var(--search-highlight-text-color-light);
            padding: 0.05em 0.2em;
            border-radius: 0.15em;
            font-weight: 600;
            box-shadow: none;
        }

        .dark .search-term-highlight,
        .dark mark {
            background-color: var(--search-highlight-text-bg-dark);
            color: var(--search-highlight-text-color-dark);
        }

        .highlight-search-result-textarea {
            transition: box-shadow 0.3s ease-in-out;
            box-shadow: 0 0 8px 2px var(--color-primary, var(--color-primary-default));
        }


        /* ======================================== */
        /*             Прочие стили                 */
        /* ======================================== */
        .reglament-item {
            cursor: pointer;
        }

        .cib-link-item {
            cursor: pointer !important;
        }

        #appContent {
            flex-grow: 1;
        }

        #appContent.content-hidden-initial {
            opacity: 0;
            visibility: hidden;
        }

        #appContent.content-fading-in {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.6s ease-in;
        }

        #important-notifications-container.custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }

        #important-notifications-container.custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 4px;
        }

        #important-notifications-container.custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }

        #important-notifications-container.custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.5);
        }

        .dark #important-notifications-container.custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        .dark #important-notifications-container.custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.15);
        }

        .dark #important-notifications-container.custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        .notification-updated-shake {
            animation: shake 0.5s cubic-bezier(.36, .07, .19, .97) both;
            transform: translate3d(0, 0, 0);
        }

        @keyframes shake {

            10%,
            90% {
                transform: translate3d(-1px, 0, 0);
            }

            20%,
            80% {
                transform: translate3d(2px, 0, 0);
            }

            30%,
            50%,
            70% {
                transform: translate3d(-4px, 0, 0);
            }

            40%,
            60% {
                transform: translate3d(4px, 0, 0);
            }
        }


        /* ======================================== */
        /*        Стили для Копирайта             */
        /* ======================================== */
        #app-copyright {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            color: #9ca3af;
            background-color: transparent;
            z-index: 10;
            transition: color 0.2s ease-in-out;
            padding-bottom: calc(0.5rem + env(safe-area-inset-bottom));
        }

        .dark #app-copyright {
            color: #4b5563;
        }

        #app-copyright a {
            color: inherit;
            text-decoration: none;
        }

        #app-copyright a:hover {
            text-decoration: underline;
            color: var(--color-primary, #5D5CDE);
        }

        .timer-segment {
            display: inline-block;
            min-width: 2ch;
            text-align: center;
            padding: .5rem;
            border-radius: 3px;
            cursor: pointer;
            transition: background-color 0.2s;
            vertical-align: baseline;
        }

        .timer-colon {
            display: inline-block;
            padding: 0 0.1ch;
            vertical-align: baseline;
            user-select: none;
        }

        .timer-segment:hover,
        .timer-segment:focus {
            background-color: rgba(0, 0, 0, 0.1);
        }

        .dark .timer-segment:hover,
        .dark .timer-segment:focus {
            background-color: rgba(255, 255, 255, 0.1);
        }

        input.timer-input-active {
            text-align: center;
            border: 1px solid var(--color-primary, #5D5CDE);
            border-radius: 3px;
            padding: 0;
            min-width: 2ch;
            width: 2.1ch;
            box-sizing: border-box;
            background-color: var(--input-bg-color, #fff);
            color: var(--input-text-color, #000);
            vertical-align: baseline;
        }

        .dark input.timer-input-active {
            background-color: var(--input-bg-color-dark, #374151);
            color: var(--input-text-color-dark, #e5e7eb);
        }


        /* ======================================== */
        /*     Стили для ховера кнопок табов        */
        /* ======================================== */
        .tab-btn {
            position: relative;
            overflow: hidden;
            z-index: 0;
        }

        .tab-btn::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--color-primary);
            opacity: 0;
            transform: scaleY(0);
            transform-origin: bottom;
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.2s 0.05s ease-out;
            z-index: -1;
        }

        .tab-btn:hover::before {
            transform: scaleY(1);
            opacity: 0.1;
        }

        .tab-btn.border-primary.text-primary:hover::before {
            transform: scaleY(0);
            opacity: 0;
            transition: none;
        }
    </style>
</head>

<body class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-200">

    <div class="container mx-auto px-4 py-6 max-w-7xl hidden" id="appContent">
        <header class="mb-4">
            <div class="flex flex-col md:flex-row justify-between md:items-start gap-4 mb-3">
                <div>
                    <h1 class="text-2xl md:text-3xl font-bold text-primary">Copilot 1СО</h1>
                    <p class="text-sm md:text-base text-gray-600 dark:text-gray-400">Ваш надежный второй пилот</p>
                </div>
                <div class="flex flex-wrap items-center justify-center md:justify-end gap-x-3 gap-y-2 w-full md:w-auto">
                    <div id="appTimer" class="flex items-center gap-1 text-sm flex-shrink-0">
                        <button id="timerToggleButton" title="Старт/Пауза"
                            class="p-1.5 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-primary transition-colors">
                            <i class="fas fa-play"></i>
                        </button>
                        <button id="timerResetButton" title="Сброс"
                            class="p-1.5 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-primary transition-colors">
                            <i class="fas fa-undo"></i>
                        </button>
                        <span id="timerDisplay"
                            class="font-mono px-1 py-0.5 rounded bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 tabular-nums inline-flex items-baseline text-base">
                            <!-- Динамика из JavaScript -->
                        </span>
                        <button id="timerDecreaseButton" title="Уменьшить на 1 мин"
                            class="p-1.5 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-primary transition-colors">
                            <i class="fas fa-minus"></i>
                        </button>
                        <button id="timerIncreaseButton" title="Увеличить на 1 мин"
                            class="p-1.5 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-primary transition-colors">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>

                    <button id="themeToggle"
                        class="p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-primary transition-colors flex-shrink-0"
                        title="Сменить тему">
                        <i class="fas fa-sun text-yellow-500 hidden dark:inline"></i>
                        <i class="fas fa-moon text-blue-300 dark:hidden"></i>
                    </button>
                    <div
                        class="relative w-full order-last sm:order-none sm:w-auto sm:min-w-[180px] md:w-[13.2rem] lg:w-[17.6rem]">
                        <input type="text" id="searchInput" placeholder="Поиск..."
                            class="w-full pl-10 pr-10 py-2 rounded-lg bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-primary text-base text-gray-900 dark:text-gray-100">
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        <button id="clearSearchInputBtn" type="button"
                            class="absolute top-1/2 right-3 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hidden"
                            title="Очистить поиск">
                            <i class="fas fa-times"></i>
                        </button>
                        <div id="searchResults"
                            class="absolute z-50 top-full mt-1 left-0 right-0 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-lg hidden max-h-96 overflow-y-auto">
                        </div>
                    </div>
                    <div class="flex gap-2 flex-shrink-0">
                        <button id="customizeUIBtn"
                            class="p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-primary transition-colors"
                            title="Настройки">
                            <i class="fas fa-cog"></i>
                        </button>
                        <button id="exportDataBtn"
                            class="p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-primary transition-colors"
                            title="Экспорт базы данных">
                            <i class="fas fa-upload"></i>
                        </button>
                        <button id="importDataBtn"
                            class="p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-primary transition-colors"
                            title="Импорт базы данных">
                            <i class="fas fa-download"></i>
                        </button>
                        <button id="forceReloadBtn"
                            class="p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-primary transition-colors"
                            title="Перезагрузка приложения">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                        <button id="showHotkeysBtn"
                            class="p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-primary transition-colors"
                            title="Горячие клавиши и управление Copilot">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <input type="file" id="importFileInput" accept=".json" class="hidden">
                    </div>
                </div>
            </div>

            <div id="advancedSearchOptions" class="hidden bg-gray-100 dark:bg-gray-800 p-3 rounded-lg mb-3">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <div>
                        <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">Искать
                            по:</label>
                        <div class="flex flex-wrap gap-2">
                            <label class="inline-flex items-center">
                                <input type="checkbox" checked
                                    class="search-field form-checkbox text-primary focus:ring-primary" value="title">
                                <span class="ml-2 text-gray-700 dark:text-gray-300">Заголовок</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" checked
                                    class="search-field form-checkbox text-primary focus:ring-primary"
                                    value="description">
                                <span class="ml-2 text-gray-700 dark:text-gray-300">Описание/Содержимое</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" checked
                                    class="search-field form-checkbox text-primary focus:ring-primary" value="steps">
                                <span class="ml-2 text-gray-700 dark:text-gray-300">Шаги</span>
                            </label>
                        </div>
                    </div>
                    <div class="flex justify-end items-end md:col-start-3">
                        <button id="toggleAdvancedSearch"
                            class="px-3 py-1.5 text-sm bg-primary hover:bg-secondary text-white rounded-md transition">
                            <i class="fas fa-cog mr-1"></i>Параметры поиска
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Навигация по вкладкам -->
        <div class="mb-3 border-b border-gray-200 dark:border-gray-700">
            <nav class="flex flex-wrap -mb-px text-sm font-medium text-center">
                <button id="mainTab"
                    class="tab-btn inline-block px-2 py-1.5 sm:px-2.5 sm:py-2 rounded-t-lg border-b-2 whitespace-nowrap text-xs sm:text-sm">
                    <i class="fas fa-home mr-0.5 sm:mr-1"></i>Главная
                </button>
                <button id="programTab"
                    class="tab-btn inline-block p-2.5 sm:p-3 rounded-t-lg border-b-2 border-transparent text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-300 whitespace-nowrap text-sm sm:text-base">
                    <i class="fas fa-desktop mr-1"></i>Программа 1С/УП
                </button>
                <button id="linksTab"
                    class="tab-btn inline-block p-2.5 sm:p-3 rounded-t-lg border-b-2 border-transparent text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-300 whitespace-nowrap text-sm sm:text-base">
                    <i class="fas fa-link mr-1"></i>Ссылки 1С
                </button>
                <button id="extLinksTab"
                    class="tab-btn inline-block p-2.5 sm:p-3 rounded-t-lg border-b-2 border-transparent text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-300 whitespace-nowrap text-sm sm:text-base">
                    <i class="fas fa-globe mr-1"></i>Внешние ресурсы
                </button>
                <button id="skziTab"
                    class="tab-btn inline-block p-2.5 sm:p-3 rounded-t-lg border-b-2 border-transparent text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-300 whitespace-nowrap text-sm sm:text-base">
                    <i class="fas fa-key mr-1"></i>СКЗИ
                </button>
                <button id="lk1cTab"
                    class="tab-btn inline-block p-2.5 sm:p-3 rounded-t-lg border-b-2 border-transparent text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-300 whitespace-nowrap text-sm sm:text-base">
                    <i class="fas fa-user-circle mr-1"></i>1СО ЛК
                </button>
                <button id="webRegTab"
                    class="tab-btn inline-block p-2.5 sm:p-3 rounded-t-lg border-b-2 border-transparent text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-300 whitespace-nowrap text-sm sm:text-base">
                    <i class="fas fa-plug mr-1"></i>Веб-Регистратор
                </button>
                <button id="reglamentsTab"
                    class="tab-btn inline-block p-2.5 sm:p-3 rounded-t-lg border-b-2 border-transparent text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-300 whitespace-nowrap text-sm sm:text-base">
                    <i class="fas fa-clipboard-list mr-1"></i>Регламенты
                </button>
                <button id="bookmarksTab"
                    class="tab-btn inline-block p-2.5 sm:p-3 rounded-t-lg border-b-2 border-transparent text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-300 whitespace-nowrap text-sm sm:text-base">
                    <i class="fas fa-bookmark mr-1"></i>Закладки
                </button>
                <button id="sedoTypesTab"
                    class="tab-btn inline-block p-2.5 sm:p-3 rounded-t-lg border-b-2 border-transparent text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-300 whitespace-nowrap text-sm sm:text-base">
                    <i class="fas fa-comments mr-1"></i>Типы СЭДО
                </button>
                <button id="blacklistedClientsTab"
                    class="tab-btn inline-block p-2.5 sm:p-3 rounded-t-lg border-b-2 border-transparent text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-300 whitespace-nowrap text-sm sm:text-base">
                    <i class="fas fa-user-secret mr-1"></i>
                    <span class="hidden sm:inline">Черный список жаб</span>
                </button>
                <div class="relative group ml-auto md:ml-1 shrink-0">
                    <button id="moreTabsBtn"
                        class="tab-btn inline-block p-2.5 sm:p-3 rounded-t-lg border-b-2 border-transparent text-gray-500 dark:text-gray-400 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-300 whitespace-nowrap text-sm sm:text-base">
                        <i class="fas fa-ellipsis-h"></i>
                    </button>
                    <div id="moreTabsDropdown"
                        class="absolute hidden right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg z-10 w-48">
                    </div>
                </div>
            </nav>
        </div>


        <!-- Главная -->
        <div id="mainContent" class="tab-content">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-content">
                <div class="bg-gray-100 dark:bg-gray-800 p-content rounded-lg shadow-md">
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 mb-content-sm">
                        <h2 class="text-xl font-bold flex-shrink min-w-0">Главный алгоритм работы (значения можно
                            редактировать под ваши нужды)</h2>
                        <button id="editMainBtn"
                            class="p-1.5 lg:px-3 lg:py-1.5 bg-primary hover:bg-secondary text-white rounded-md transition sm:self-start flex-shrink-0"
                            title="Редактировать">
                            <i class="fas fa-edit fa-xs lg:mr-1"></i>
                            <span class="hidden lg:inline">Редактировать</span>
                        </button>
                    </div>
                    <div id="mainAlgorithm" class="space-y-content-sm">
                        <div
                            class="algorithm-step bg-white dark:bg-gray-700 p-content-sm rounded-lg shadow-sm border-l-4 border-primary">
                            <h3 class="font-bold text-base">Шаг 1: Приветствие</h3>
                            <p class="text-sm">Поприветствуйте клиента, представьтесь, назовите компанию и спросите, чем
                                можете помочь.</p>
                            <p class="text-gray-600 dark:text-gray-400 mt-1 text-sm">Пример: "Добрый день! Техническая
                                поддержка 1С-Отчетность, меня зовут [ваше имя]. Чем могу помочь?"</p>
                        </div>
                        <div
                            class="algorithm-step bg-white dark:bg-gray-700 p-content-sm rounded-lg shadow-sm border-l-4 border-primary">
                            <h3 class="font-bold text-base">Шаг 2: Уточнение ИНН</h3>
                            <p class="text-sm">Запросите ИНН организации для идентификации клиента в системе.</p>
                            <p class="text-gray-600 dark:text-gray-400 mt-1 text-sm">Пример: "Для начала работы,
                                подскажите, пожалуйста, ИНН вашей организации."</p>
                            <p class="text-sm text-gray-500 dark:text-gray-400 mt-1 italic">
                                <a href="#" class="text-primary hover:underline" id="noInnLink">Что делать, если клиент
                                    не может назвать ИНН?</a>
                            </p>
                        </div>
                        <div
                            class="algorithm-step bg-white dark:bg-gray-700 p-content-sm rounded-lg shadow-sm border-l-4 border-primary">
                            <h3 class="font-bold text-base">Шаг 3: Идентификация проблемы</h3>
                            <p class="text-sm">Выясните суть проблемы, задавая уточняющие вопросы.</p>
                            <p class="text-gray-600 dark:text-gray-400 mt-1 text-sm">Примеры вопросов:</p>
                            <ul class="list-disc list-inside pl-5 mt-1 text-gray-600 dark:text-gray-400 text-sm">
                                <li><strong>Назовите, пожалуйста, полный текст ошибки</strong> (важно записать дословно)
                                </li>
                                <li>Когда впервые возникла проблема?</li>
                            </ul>
                        </div>
                        <div
                            class="algorithm-step bg-white dark:bg-gray-700 p-content-sm rounded-lg shadow-sm border-l-4 border-primary">
                            <h3 class="font-bold text-base">Шаг 4: Решение проблемы</h3>
                            <p class="text-sm">Определите категорию проблемы и перейдите к соответствующему разделу с
                                инструкциями по решению.</p>
                        </div>
                    </div>
                </div>

                <div class="bg-gray-100 dark:bg-gray-800 p-content-sm rounded-lg shadow-md">
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 mb-content-sm">
                        <h2 class="text-lg font-bold">Информация по обращению</h2>
                        <div class="flex gap-2">
                            <button id="clearClientDataBtn"
                                class="p-2 lg:px-3 lg:py-1.5 bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition text-sm flex items-center"
                                title="Очистить">
                                <i class="fas fa-trash"></i>
                                <span class="hidden lg:inline lg:ml-1">Очистить</span>
                            </button>
                        </div>
                    </div>
                    <div class="bg-white dark:bg-gray-700 p-1 rounded-lg shadow-sm overflow-hidden">
                        <textarea id="clientNotes" rows="20"
                            placeholder="Здесь для удобства можно фиксировать всю информацию по обращению клиента..."
                            class="w-full p-1 resize-none bg-gray-50 dark:bg-gray-800 border-0 rounded-md focus:outline-none focus:ring-2 focus:ring-primary text-base text-gray-900 dark:text-gray-100 custom-scrollbar"></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Программа 1С/УП -->
        <div id="programContent" class="tab-content hidden">
            <div class="bg-gray-100 dark:bg-gray-800 p-content rounded-lg shadow-md">
                <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-content">
                    <h2 class="text-2xl font-bold">Программа 1С/УП</h2>
                    <div class="flex items-center gap-2">
                        <div
                            class="flex items-center space-x-1 border border-gray-300 dark:border-gray-600 rounded-md p-0.5">
                            <button class="view-toggle p-1.5 rounded" data-view="cards" title="Вид карточек"> <i
                                    class="fas fa-th-large"></i> </button>
                            <button class="view-toggle p-1.5 rounded" data-view="list" title="Вид списка"> <i
                                    class="fas fa-list"></i> </button>
                        </div>
                        <button id="addProgramAlgorithmBtn"
                            class="px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md transition">
                            <i class="fas fa-plus mr-2"></i>Добавить
                        </button>
                    </div>
                </div>
                <div id="programAlgorithms" class="grid gap-content" data-section-id="programAlgorithms"
                    data-default-view="cards">
                </div>
            </div>
        </div>

        <!-- СКЗИ -->
        <div id="skziContent" class="tab-content hidden">
            <div class="bg-gray-100 dark:bg-gray-800 p-content rounded-lg shadow-md">
                <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-content">
                    <h2 class="text-2xl font-bold">СКЗИ</h2>
                    <div class="flex items-center gap-2">
                        <div
                            class="flex items-center space-x-1 border border-gray-300 dark:border-gray-600 rounded-md p-0.5">
                            <button class="view-toggle p-1.5 rounded" data-view="cards" title="Вид карточек"> <i
                                    class="fas fa-th-large"></i> </button>
                            <button class="view-toggle p-1.5 rounded" data-view="list" title="Вид списка"> <i
                                    class="fas fa-list"></i> </button>
                        </div>
                        <button id="addSkziAlgorithmBtn"
                            class="px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md transition">
                            <i class="fas fa-plus mr-2"></i>Добавить
                        </button>
                    </div>
                </div>
                <div id="skziAlgorithms" class="grid gap-content" data-section-id="skziAlgorithms"
                    data-default-view="cards">
                </div>
            </div>
        </div>

        <!-- 1СО ЛК -->
        <div id="lk1cContent" class="tab-content hidden">
            <div class="bg-gray-100 dark:bg-gray-800 p-content rounded-lg shadow-md">
                <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-content">
                    <h2 class="text-2xl font-bold">1СО ЛК (Личный кабинет)</h2>
                    <div class="flex items-center gap-2">
                        <div
                            class="flex items-center space-x-1 border border-gray-300 dark:border-gray-600 rounded-md p-0.5">
                            <button class="view-toggle p-1.5 rounded" data-view="cards" title="Вид карточек"> <i
                                    class="fas fa-th-large"></i> </button>
                            <button class="view-toggle p-1.5 rounded" data-view="list" title="Вид списка"> <i
                                    class="fas fa-list"></i> </button>
                        </div>
                        <button id="addLk1cAlgorithmBtn"
                            class="px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md transition">
                            <i class="fas fa-plus mr-2"></i>Добавить
                        </button>
                    </div>
                </div>
                <div id="lk1cAlgorithms" class="grid gap-content" data-section-id="lk1cAlgorithms"
                    data-default-view="cards">
                </div>
            </div>
        </div>

        <!-- Веб-Регистратор -->
        <div id="webRegContent" class="tab-content hidden">
            <div class="bg-gray-100 dark:bg-gray-800 p-content rounded-lg shadow-md">
                <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-content">
                    <h2 class="text-2xl font-bold">Веб-Регистратор</h2>
                    <div class="flex items-center gap-2">
                        <div
                            class="flex items-center space-x-1 border border-gray-300 dark:border-gray-600 rounded-md p-0.5">
                            <button class="view-toggle p-1.5 rounded" data-view="cards" title="Вид карточек"> <i
                                    class="fas fa-th-large"></i> </button>
                            <button class="view-toggle p-1.5 rounded" data-view="list" title="Вид списка"> <i
                                    class="fas fa-list"></i> </button>
                        </div>
                        <button id="addWebRegAlgorithmBtn"
                            class="px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md transition">
                            <i class="fas fa-plus mr-2"></i>Добавить
                        </button>
                    </div>
                </div>
                <div id="webRegAlgorithms" class="grid gap-content" data-section-id="webRegAlgorithms"
                    data-default-view="cards">
                </div>
            </div>
        </div>

        <!-- Ссылки 1С -->
        <div id="linksContent" class="tab-content hidden">
            <div class="bg-gray-100 dark:bg-gray-800 p-content rounded-lg shadow-md">
                <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-content">
                    <h2 class="text-2xl font-bold">Ссылки в программе 1С</h2>
                    <div class="flex items-center gap-2">
                        <div
                            class="flex items-center space-x-1 border border-gray-300 dark:border-gray-600 rounded-md p-0.5">
                            <button class="view-toggle p-1.5 rounded" data-view="cards" title="Вид карточек"> <i
                                    class="fas fa-th-large"></i> </button>
                            <button class="view-toggle p-1.5 rounded" data-view="list" title="Вид списка"> <i
                                    class="fas fa-list"></i> </button>
                        </div>
                        <button id="addLinkBtn"
                            class="px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md transition">
                            <i class="fas fa-plus mr-2"></i>Добавить
                        </button>
                    </div>
                </div>
                <div
                    class="mb-content p-content-sm bg-blue-50 dark:bg-blue-900/50 border border-blue-200 dark:border-blue-700 rounded-lg text-sm text-blue-800 dark:text-blue-200">
                    <i class="fas fa-info-circle mr-1"></i> Это внутренние ссылки 1С (формат `e1cib/...`). Используйте
                    кнопку <i class="fas fa-copy"></i> для копирования. В 1С скопированную ссылку можно вставить по
                    комбинации клавиш Shift + F11.
                </div>
                <div class="mb-content flex flex-col md:flex-row gap-content-sm relative">
                    <input type="text" id="linkSearchInput" placeholder="Поиск по названию..."
                        class="flex-grow px-3 pr-10 py-2 rounded-lg bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-primary text-base text-gray-900 dark:text-gray-100">
                    <button id="clearLinkSearchInputBtn" type="button"
                        class="absolute top-1/2 right-3 md:right-auto md:left-[calc(100%-2rem)] transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hidden"
                        title="Очистить поиск ссылок">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div id="linksContainer" class="flex flex-col" data-section-id="linksContainer"
                    data-default-view="cards">
                    <div class="text-center py-6 text-gray-500 dark:text-gray-400">Загрузка ссылок...</div>
                </div>
            </div>
        </div>

        <!-- Регламенты -->
        <div id="reglamentsContent" class="tab-content hidden">
            <div class="bg-gray-100 dark:bg-gray-800 p-content rounded-lg shadow-md">
                <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-content">
                    <h2 class="text-2xl font-bold">Регламенты</h2>
                    <div id="globalReglamentActionsBar" class="flex items-center space-x-2">
                        <div class="flex items-center space-x-1 border border-gray-300 dark:border-gray-600 rounded-md p-0.5"
                            role="group">
                            <button type="button"
                                class="view-toggle p-1.5 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-300"
                                data-view="cards" title="Вид плитками">
                                <i class="fas fa-th-large"></i>
                            </button>
                            <button type="button"
                                class="view-toggle p-1.5 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-300"
                                data-view="list" title="Вид списком">
                                <i class="fas fa-list"></i>
                            </button>
                        </div>
                        <button id="addReglamentBtn"
                            class="px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md flex items-center justify-center whitespace-nowrap">
                            <i class="fas fa-plus mr-2"></i>Добавить регламент
                        </button>
                    </div>
                </div>

                <div id="reglamentCategoryGrid"
                    class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-content mb-content-lg"
                    data-section-id="reglamentCategoryGrid" data-default-view="cards">
                    <div class="text-center py-6 text-gray-500 md:col-span-3">Загрузка категорий...</div>
                </div>

                <div id="reglamentsList" class="hidden">
                    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-content gap-3">
                        <div class="flex items-center">
                            <button id="backToCategories"
                                class="p-2 mr-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 hover:text-primary transition-colors"
                                title="Назад к категориям">
                                <i class="fas fa-arrow-left"></i>
                            </button>
                            <h3 id="currentCategoryTitle" class="text-xl font-bold"></h3>
                        </div>
                    </div>
                    <div id="reglamentsContainer" class="auto-rows-fr" data-section-id="reglamentsContainer"
                        data-default-view="list">
                    </div>
                </div>
            </div>
        </div>

        <!-- Закладки -->
        <div id="bookmarksContent" class="tab-content hidden">
            <div class="bg-gray-100 dark:bg-gray-800 p-content rounded-lg shadow-md">
                <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-content">
                    <h2 class="text-2xl font-bold">Закладки</h2>
                    <div class="flex items-center gap-2 flex-wrap">
                        <div
                            class="flex items-center space-x-1 border border-gray-300 dark:border-gray-600 rounded-md p-0.5">
                            <button class="view-toggle p-1.5 rounded" data-view="cards" title="Вид карточек"> <i
                                    class="fas fa-th-large"></i> </button>
                            <button class="view-toggle p-1.5 rounded" data-view="list" title="Вид списка"> <i
                                    class="fas fa-list"></i> </button>
                        </div>
                        <button id="addBookmarkBtn"
                            class="px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md transition">
                            <i class="fas fa-plus mr-2"></i>Добавить
                        </button>
                        <button id="organizeBookmarksBtn"
                            class="px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md transition">
                            <i class="fas fa-folder mr-2"></i>Управление папками
                        </button>
                    </div>
                </div>
                <div class="mb-content flex flex-col md:flex-row gap-content-sm">
                    <div class="relative flex-grow">
                        <input type="text" id="bookmarkSearchInput" placeholder="Поиск по закладкам..."
                            class="w-full px-3 pr-10 py-2 rounded-lg bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-primary text-base text-gray-900 dark:text-gray-100">
                        <button id="clearBookmarkSearchBtn" type="button"
                            class="absolute top-1/2 right-3 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hidden"
                            title="Очистить поиск по закладкам">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <select id="bookmarkFolderFilter"
                        class="px-3 py-2 rounded-lg bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-primary text-base text-gray-900 dark:text-gray-100 md:max-w-xs">
                        <option value="">Все папки</option>
                    </select>
                </div>
                <div id="bookmarksContainer" class="grid gap-content" data-section-id="bookmarksContainer"
                    data-default-view="cards">
                </div>
            </div>
        </div>

        <!-- Типы сообщений СЭДО -->
        <div id="sedoTypesContent" class="tab-content hidden">
            <div class="bg-gray-100 dark:bg-gray-800 p-content rounded-lg shadow-md">
                <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start gap-4 mb-content">
                    <h2 class="text-2xl font-bold text-primary">Типы сообщений СЭДО</h2>
                    <div class="flex items-center gap-2 flex-wrap sm:flex-nowrap">
                        <button id="editSedoTypesBtn"
                            class="px-3 py-1.5 text-sm bg-primary hover:bg-secondary text-white rounded-md transition flex items-center">
                            <i class="fas fa-edit mr-1.5"></i>Редактировать
                        </button>
                        <button id="saveSedoTypesBtn"
                            class="px-3 py-1.5 text-sm bg-green-600 hover:bg-green-700 text-white rounded-md transition flex items-center"
                            style="display: none;">
                            <i class="fas fa-save mr-1.5"></i>Сохранить
                        </button>
                        <button id="cancelSedoTypesBtn"
                            class="px-3 py-1.5 text-sm bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 rounded-md transition"
                            style="display: none;">
                            Отмена
                        </button>
                    </div>
                </div>

                <div id="sedoTypesInfoContainer" class="space-y-content">
                </div>
            </div>
        </div>

        <!-- Внешние ресурсы -->
        <div id="extLinksContent" class="tab-content hidden">
            <div class="bg-gray-100 dark:bg-gray-800 p-content rounded-lg shadow-md">
                <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-content">
                    <h2 class="text-2xl font-bold">Внешние ресурсы</h2>
                    <div class="flex items-center gap-2 flex-wrap">
                        <div
                            class="flex items-center space-x-1 border border-gray-300 dark:border-gray-600 rounded-md p-0.5">
                            <button class="view-toggle p-1.5 rounded" data-view="cards" title="Вид карточек"> <i
                                    class="fas fa-th-large"></i> </button>
                            <button class="view-toggle p-1.5 rounded" data-view="list" title="Вид списка"> <i
                                    class="fas fa-list"></i> </button>
                        </div>
                        <button id="addExtLinkBtn"
                            class="px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md transition">
                            <i class="fas fa-plus mr-2"></i>Добавить
                        </button>
                    </div>
                </div>
                <div class="mb-content flex flex-col md:flex-row gap-content-sm">
                    <input type="text" id="extLinkSearchInput" placeholder="Поиск по ресурсам..."
                        class="flex-grow px-3 py-2 rounded-lg bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-primary text-base text-gray-900 dark:text-gray-100">
                    <select id="extLinkCategoryFilter"
                        class="px-3 py-2 rounded-lg bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-primary text-base text-gray-900 dark:text-gray-100 md:max-w-xs">
                        <option value="">Все категории</option>
                    </select>
                </div>
                <div id="extLinksContainer" class="grid gap-content" data-section-id="extLinksContainer"
                    data-default-view="cards">
                </div>
            </div>
        </div>

        <div id="blacklistedClientsContent" class="tab-content hidden p-4">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-semibold text-gray-800 dark:text-gray-200">Черный список для жаб (но не
                    говорите о нем <s>жабам</s> клиентам!)</h2>
                <button id="addBlacklistEntryBtn"
                    class="px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md shadow-sm transition">
                    <i class="fas fa-plus mr-2"></i>Добавить
                </button>
            </div>
            <div class="mb-4 flex items-center gap-2">
                <label for="blacklistSearchInput" class="sr-only">Поиск по черному списку</label>
                <input type="text" id="blacklistSearchInput"
                    placeholder="Поиск по организации, ИНН, телефону, примечанию..."
                    class="flex-grow px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary text-sm">
                <button id="clearBlacklistSearchBtn" title="Очистить поиск"
                    class="p-2 text-gray-500 hover:text-red-500 dark:text-gray-400 dark:hover:text-red-400 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-red-500 hidden">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="blacklistTableContainer" class="bg-white dark:bg-gray-800 shadow rounded-lg overflow-x-auto">
                <!-- Динамика через JavaScript -->
                <p class="text-gray-500 dark:text-gray-400 text-center py-4">Загрузка данных...</p>
            </div>
        </div>

        <!-- Модальные окна -->
        <div id="algorithmModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
            <div class="flex items-center justify-center min-h-full">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-7xl w-full">
                    <div class="p-content border-b border-gray-200 dark:border-gray-700">
                        <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4">
                            <h2 id="modalTitle" class="text-2xl font-bold">Название алгоритма</h2>
                            <div class="flex flex-wrap gap-2 justify-end flex-shrink-0">
                                <button id="editAlgorithmBtn"
                                    class="px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md transition text-sm">
                                    <i class="fas fa-edit mr-2"></i>Редактировать
                                </button>
                                <button id="deleteAlgorithmBtn"
                                    class="px-4 py-2 bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition text-sm">
                                    <i class="fas fa-trash mr-2"></i>Удалить
                                </button>
                                <button id="toggleFullscreenViewBtn"
                                    class="p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                                    title="Развернуть на весь экран">
                                    <i class="fas fa-expand"></i>
                                </button>
                                <button id="closeModalBtn"
                                    class="p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                                    title="Закрыть">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div id="algorithmSteps"
                        class="p-content space-y-content-sm overflow-y-auto max-h-[calc(90vh-150px)]">
                    </div>
                </div>
            </div>
        </div>

        <!-- Окно настроек -->
        <div id="editModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 p-4 overflow-y-auto">
            <div class="flex items-center justify-center min-h-full">
                <div
                    class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-5xl w-full max-h-[95vh] flex flex-col overflow-hidden">
                    <div class="p-content border-b border-gray-200 dark:border-gray-700 flex-shrink-0">
                        <div class="flex justify-between items-center">
                            <h2 class="text-xl font-bold text-gray-900 dark:text-gray-100 flex-grow mr-4 truncate"
                                id="editModalTitle">
                                Редактирование: Название алгоритма...
                            </h2>
                            <div class="flex items-center flex-shrink-0">
                                <button id="toggleFullscreenEditBtn" type="button"
                                    class="inline-block p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors align-middle"
                                    title="Развернуть на весь экран">
                                    <i class="fas fa-expand"></i>
                                </button>
                                <button type="button" id="closeEditModalBtn"
                                    class="close-modal inline-block p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors align-middle ml-1"
                                    title="Закрыть">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="p-content overflow-y-auto flex-1 min-h-0">
                        <form id="editAlgorithmForm">
                            <div class="mb-4">
                                <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300"
                                    for="algorithmTitle">Название алгоритма</label>
                                <input type="text" id="algorithmTitle" name="algorithmTitle" required
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary text-base bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100">
                            </div>
                            <div id="algorithmDescriptionContainer" class="mb-4">
                                <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300"
                                    for="algorithmDescription">Описание</label>
                                <textarea id="algorithmDescription" name="algorithmDescription" rows="3"
                                    class="w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary text-base text-gray-900 dark:text-gray-100"
                                    placeholder="Введите описание алгоритма..."></textarea>
                            </div>
                            <div id="algorithmDescriptionContainer" class="mb-4">
                            </div>
                            <div id="editSteps" class="space-y-4">
                            </div>
                            <button type="button" id="addStepBtn"
                                class="mt-4 px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md transition">
                                <i class="fas fa-plus mr-2"></i>Добавить шаг
                            </button>
                        </form>
                    </div>

                    <div class="p-content border-t border-gray-200 dark:border-gray-700 mt-auto flex-shrink-0">
                        <div class="flex justify-end gap-2">
                            <button type="button" id="cancelEditBtn"
                                class="cancel-modal px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 rounded-md transition">Отмена</button>
                            <button type="submit" id="saveAlgorithmBtn" form="editAlgorithmForm"
                                class="px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md transition">Сохранить</button>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div id="addModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 p-4 overflow-y-auto">
            <div class="flex items-center justify-center min-h-full">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col">
                    <div class="p-content border-b border-gray-200 dark:border-gray-700">
                        <div class="flex justify-between items-center">
                            <h2 id="addModalTitle" class="text-2xl font-bold">Новый алгоритм</h2>
                            <div>
                                <button id="toggleFullscreenAddBtn"
                                    class="inline-block p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors align-middle"
                                    title="Развернуть на весь экран">
                                    <i class="fas fa-expand"></i>
                                </button>
                                <button id="closeAddModalBtn"
                                    class="inline-block p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors align-middle"
                                    title="Закрыть">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="p-content overflow-y-auto flex-1 bg-gray-100 dark:bg-gray-700">
                        <div class="mb-4">
                            <label for="newAlgorithmTitle"
                                class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">Название
                                алгоритма</label>
                            <input type="text" id="newAlgorithmTitle"
                                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-500 rounded-md focus:outline-none focus:ring-2 focus:ring-primary text-base bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
                        </div>
                        <div class="mb-4">
                            <label for="newAlgorithmDesc"
                                class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">Краткое
                                описание</label>
                            <textarea id="newAlgorithmDesc" rows="3"
                                class="w-full px-3 py-2 border border-gray-300 dark:border-gray-500 rounded-md focus:outline-none focus:ring-2 focus:ring-primary text-base bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"></textarea>
                        </div>

                        <div id="newSteps" class="space-y-4">
                        </div>

                        <div class="mt-4">
                            <button id="addNewStepBtn"
                                class="px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md transition">
                                <i class="fas fa-plus mr-2"></i>Добавить шаг
                            </button>
                        </div>
                    </div>

                    <div class="p-content border-t border-gray-200 dark:border-gray-600 mt-auto">
                        <div class="flex justify-end gap-2">
                            <button id="cancelAddBtn"
                                class="px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 rounded-md transition">
                                Отмена
                            </button>
                            <button id="saveNewAlgorithmBtn"
                                class="px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md transition">
                                Сохранить
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Модальное окно Настройки UI -->
        <div id="customizeUIModal"
            class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 p-4 overflow-y-auto flex items-center justify-center hidden">
            <div class="flex items-center justify-center min-h-full">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-7xl w-full max-h-screen flex flex-col">
                    <div class="p-content border-b border-gray-200 dark:border-gray-700">
                        <div class="flex justify-between items-center gap-4">
                            <h2 class="text-2xl font-bold">Настройки</h2>
                            <div class="flex items-center gap-3">
                                <div class="relative">
                                    <span id="employeeExtensionDisplay"
                                        class="inline-block px-4 py-2 text-base border-2 border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors min-w-[180px] text-center align-middle"
                                        title="Клик для редактирования">
                                    </span>
                                    <input type="text" id="employeeExtensionInput"
                                        class="inline-block px-4 py-2 text-base border-2 border-primary rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-white dark:bg-gray-900 hidden min-w-[180px] align-middle"
                                        maxlength="4" pattern="\d*" title="Введите доб. номер">
                                </div>
                                <button id="closeCustomizeUIModalBtn"
                                    class="p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                                    title="Закрыть">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="p-content overflow-y-auto flex-1">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-content-lg">
                            <div>
                                <div class="mb-content">
                                    <label
                                        class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">Ориентация
                                        главного экрана</label>
                                    <div class="flex space-x-3 mt-2">
                                        <label class="flex items-center">
                                            <input type="radio" name="mainLayout" value="horizontal"
                                                class="form-radio text-primary focus:ring-primary mr-2" checked>
                                            <span class="text-gray-700 dark:text-gray-300">Горизонтальная</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" name="mainLayout" value="vertical"
                                                class="form-radio text-primary focus:ring-primary mr-2">
                                            <span class="text-gray-700 dark:text-gray-300">Вертикальная</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="mb-content">
                                    <label
                                        class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">Управление
                                        разделами (вкладками)</label>
                                    <div class="space-y-2 mt-2">
                                        <div id="panelSortContainer" class="space-y-2">
                                        </div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">* Перетаскивайте
                                            элементы для изменения порядка вкладок</p>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-lg font-semibold mb-content-sm text-gray-900 dark:text-gray-100">Внешний
                                    вид</h3>
                                <div class="mb-content">
                                    <label
                                        class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">Цветовая
                                        схема</label>
                                    <div class="grid grid-cols-5 gap-2 mt-2">
                                        <button
                                            class="color-swatch w-8 h-8 rounded-full bg-indigo-600 border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-primary"
                                            data-color="#5D5CDE"></button>
                                        <button
                                            class="color-swatch w-8 h-8 rounded-full bg-blue-600 border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-primary"
                                            data-color="#2563EB"></button>
                                        <button
                                            class="color-swatch w-8 h-8 rounded-full bg-green-600 border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-primary"
                                            data-color="#16A34A"></button>
                                        <button
                                            class="color-swatch w-8 h-8 rounded-full bg-red-600 border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-primary"
                                            data-color="#DC2626"></button>
                                        <button
                                            class="color-swatch w-8 h-8 rounded-full bg-purple-600 border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-primary"
                                            data-color="#9333EA"></button>
                                        <button
                                            class="color-swatch w-8 h-8 rounded-full bg-orange-600 border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-primary"
                                            data-color="#EA580C"></button>
                                        <button
                                            class="color-swatch w-8 h-8 rounded-full bg-teal-600 border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-primary"
                                            data-color="#0D9488"></button>
                                        <button
                                            class="color-swatch w-8 h-8 rounded-full bg-pink-600 border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-primary"
                                            data-color="#DB2777"></button>
                                        <button
                                            class="color-swatch w-8 h-8 rounded-full bg-amber-600 border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-primary"
                                            data-color="#D97706"></button>
                                        <button
                                            class="color-swatch w-8 h-8 rounded-full bg-gray-600 border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-primary"
                                            data-color="#4B5563"></button>
                                    </div>
                                </div>
                                <div class="mb-content">
                                    <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">Режим
                                        темы</label>
                                    <div class="flex space-x-3 mt-2">
                                        <label class="flex items-center">
                                            <input type="radio" name="themeMode" value="light"
                                                class="form-radio text-primary focus:ring-primary mr-2">
                                            <span class="text-gray-700 dark:text-gray-300">Светлая</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" name="themeMode" value="dark"
                                                class="form-radio text-primary focus:ring-primary mr-2">
                                            <span class="text-gray-700 dark:text-gray-300">Темная</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" name="themeMode" value="auto"
                                                class="form-radio text-primary focus:ring-primary mr-2" checked>
                                            <span class="text-gray-700 dark:text-gray-300">Системная</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="mb-content">
                                    <label
                                        class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">Масштаб</label>
                                    <div class="flex items-center space-x-3 mt-2">
                                        <button id="decreaseFontBtn"
                                            class="p-1.5 rounded border border-gray-300 dark:border-gray-600 focus:outline-none text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                                            <i class="fas fa-minus"></i> </button>
                                        <span id="fontSizeLabel" class="text-gray-700 dark:text-gray-300">100%</span>
                                        <button id="increaseFontBtn"
                                            class="p-1.5 rounded border border-gray-300 dark:border-gray-600 focus:outline-none text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                                            <i class="fas fa-plus"></i> </button>
                                        <button id="resetFontBtn"
                                            class="ml-2 text-xs text-primary hover:underline focus:outline-none focus:ring-2 focus:ring-primary rounded">Сбросить
                                            на 100%</button>
                                    </div>
                                </div>
                                <div class="mb-content">
                                    <label
                                        class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">Скругление
                                        углов</label>
                                    <input type="range" min="0" max="20" value="8"
                                        class="w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-primary"
                                        id="borderRadiusSlider">
                                    <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1">
                                        <span>Квадратные</span>
                                        <span>Скругленные</span>
                                    </div>
                                </div>
                                <div class="mb-content">
                                    <label
                                        class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300">Настройка
                                        отступов</label>
                                    <input type="range" min="0" max="6" value="3"
                                        class="w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-primary"
                                        id="densitySlider">
                                    <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1">
                                        <span>Меньше</span>
                                        <span>Больше</span>
                                    </div>
                                </div>
                                <div class="space-y-content-sm border-t border-gray-200 dark:border-gray-600 pt-content-sm mt-content-lg"
                                    id="additionalSecuritySettingsSection">
                                    <div>
                                        <label for="toggleBlacklistWarning" class="flex items-center cursor-pointer">
                                            <input type="checkbox" id="toggleBlacklistWarning"
                                                name="showBlacklistUsageWarning"
                                                class="form-checkbox h-5 w-5 text-primary focus:ring-primary border-gray-300 dark:border-gray-600 rounded">
                                            <span class="ml-3 text-sm text-gray-700 dark:text-gray-300">Всегда
                                                показывать
                                                предупреждение при входе в раздел ЧС</span>
                                        </label>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1 pl-8">
                                            Если эта опция отключена, вы не будете видеть страницу с предупреждением
                                            каждый
                                            раз при переходе в раздел "Черный список".
                                        </p>
                                    </div>

                                    <div class="pt-content-sm border-t border-gray-200 dark:border-gray-600"
                                        id="uiImportSettingsSection">
                                        <label for="toggleDisableForcedBackup" class="flex items-center cursor-pointer">
                                            <input type="checkbox" id="toggleDisableForcedBackup"
                                                name="disableForcedBackupOnImport"
                                                class="form-checkbox h-5 w-5 text-primary focus:ring-primary border-gray-300 dark:border-gray-600 rounded">
                                            <span class="ml-3 text-sm text-gray-700 dark:text-gray-300">Отключить
                                                принудительный бэкап при импорте базы</span>
                                        </label>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1 pl-8">
                                            Если эта опция включена, приложение не будет автоматически создавать
                                            резервную копию текущей базы данных перед импортом новой. Используйте с
                                            осторожностью.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="p-content border-t border-gray-200 dark:border-gray-700 mt-auto">
                        <div class="flex justify-between gap-2 flex-wrap">
                            <button id="clearAllDataBtn"
                                class="px-4 py-2 bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 text-white rounded-md transition">
                                <i class="fas fa-skull-crossbones mr-1"></i> Очистить все данные
                            </button>
                            <button id="resetUISettingsBtn"
                                class="px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition">
                                Сбросить настройки интерфейса
                            </button>
                            <div class="flex gap-2">
                                <button id="cancelUISettingsBtn"
                                    class="px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition">
                                    Отмена
                                </button>
                                <button id="saveUISettingsBtn"
                                    class="px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md transition">
                                    Сохранить
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Модальное окно подтверждения очистки данных -->
        <div id="confirmClearDataModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-[60] p-4 overflow-y-auto">
            <div class="flex items-center justify-center min-h-full">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full">
                    <div class="p-content border-b border-gray-200 dark:border-gray-700">
                        <div class="flex justify-between items-center">
                            <h2 class="text-xl font-bold text-red-600 dark:text-red-500"><i
                                    class="fas fa-exclamation-triangle mr-2"></i>Подтвердите очистку данных</h2>
                            <button
                                class="close-confirm-clear-modal p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                                title="Закрыть">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-content space-y-4">
                        <p class="text-base text-gray-700 dark:text-gray-300">
                            Вы уверены, что хотите <strong class="text-red-600 dark:text-red-500">полностью удалить все
                                данные</strong> приложения (алгоритмы, настройки, заметки, закладки, ссылки, регламенты
                            - всё, что Вы вносили)?
                        </p>
                        <p class="text-lg font-semibold text-red-600 dark:text-red-500">
                            Это действие необратимо!
                        </p>
                        <div
                            class="bg-yellow-50 dark:bg-yellow-900/50 border border-yellow-200 dark:border-yellow-700 rounded-lg p-3 text-sm text-yellow-800 dark:text-yellow-200">
                            <i class="fas fa-info-circle mr-1"></i> Рекомендуется <button id="exportBeforeClearBtn"
                                class="font-medium underline hover:text-yellow-900 dark:hover:text-yellow-100 focus:outline-none">сначала
                                экспортировать ваши данные</button> в файл на случай, если они понадобятся в будущем.
                        </div>
                        <p class="text-sm text-gray-600 dark:text-gray-400">
                            После очистки приложение будет перезагружено со стандартными настройками и данными.
                        </p>
                    </div>
                    <div
                        class="p-content border-t border-gray-200 dark:border-gray-700 mt-auto bg-gray-50 dark:bg-gray-700 rounded-b-lg">
                        <div class="flex justify-end gap-3">
                            <button id="cancelClearDataBtn"
                                class="px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition">
                                Отмена
                            </button>
                            <button id="confirmAndClearDataBtn"
                                class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition">
                                <i class="fas fa-trash mr-1"></i> Да, очистить все данные
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Модальное окно Ссылки 1С -->
        <div id="cibLinkModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 p-4 overflow-y-auto">
            <div class="flex items-center justify-center min-h-full">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full">
                    <div class="p-content border-b border-gray-200 dark:border-gray-700">
                        <div class="flex justify-between items-center">
                            <h2 id="cibLinkModalTitle" class="text-xl font-bold">Добавить ссылку 1С</h2>
                            <button
                                class="close-modal p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                                title="Закрыть">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                    </div>
                    <form id="cibLinkForm">
                        <div class="p-content space-y-4">
                            <input type="hidden" id="cibLinkId">
                            <div>
                                <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300"
                                    for="cibLinkTitle">Название (для отображения)</label>
                                <input type="text" id="cibLinkTitle" required
                                    class="w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary text-base text-gray-900 dark:text-gray-100">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300"
                                    for="cibLinkValue">Ссылка 1С (e1cib/...)</label>
                                <input type="text" id="cibLinkValue" required
                                    placeholder="e1cib/list/РегистрСведений.ЧтоТоТам"
                                    class="w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary text-base text-gray-900 dark:text-gray-100">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300"
                                    for="cibLinkDescription">Описание (опционально)</label>
                                <textarea id="cibLinkDescription" rows="3"
                                    class="w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary text-base text-gray-900 dark:text-gray-100"></textarea>
                            </div>
                        </div>
                        <div class="p-content border-t border-gray-200 dark:border-gray-700 mt-auto">
                            <div class="flex justify-end gap-2">
                                <button type="button"
                                    class="cancel-modal px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition">
                                    Отмена
                                </button>
                                <button type="submit" id="saveCibLinkBtn"
                                    class="px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md transition">
                                    <i class="fas fa-save mr-1"></i> Сохранить
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно Горячие клавиши -->
    <div id="hotkeysModal" class="fixed inset-0 bg-black bg-opacity-60 hidden z-[80] p-4 overflow-y-auto">
        <div class="flex items-center justify-center min-h-full">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] flex flex-col">
                <div class="p-5 border-b border-gray-200 dark:border-gray-700 flex-shrink-0">
                    <div class="flex justify-between items-center">
                        <h2 class="text-xl font-bold text-gray-900 dark:text-gray-100 flex items-center">
                            <i class="fas fa-keyboard mr-3 text-primary"></i>Горячие клавиши и управление Copilot
                        </h2>
                        <div class="flex items-center flex-shrink-0">
                            <button id="toggleFullscreenHotkeysBtn" type="button"
                                class="p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                                title="Развернуть на весь экран">
                                <i class="fas fa-expand"></i>
                            </button>
                            <button id="closeHotkeysModalBtn" type="button"
                                class="p-2 ml-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                                title="Закрыть (Esc)">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="p-6 overflow-y-auto flex-1 text-sm leading-relaxed space-y-5">
                    <section>
                        <h3 class="text-lg font-semibold mb-3 border-b border-gray-300 dark:border-gray-600 pb-1">
                            Навигация и Основные Действия:</h3>
                        <ul class="space-y-2.5 list-inside">
                            <li><code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Backspace</code>
                                (вне поля ввода и активных окон деталей/просмотра): Вернуться на предыдущую страницу в
                                приложении (например, из списка регламентов категории к списку категорий).</li>
                            <li><code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Alt + F</code>
                                (вне поля ввода): Установить фокус на поле глобального поиска и выделить его содержимое.
                            </li>
                            <li><code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Alt + I</code>
                                (вне поля ввода): Открыть окно настроек приложения.</li>
                            <li><code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Alt + V</code>
                                (вне поля ввода): Переключить вид отображения элементов (список/плитки) в текущей
                                активной секции (например, для закладок, ссылок и т.д.).</li>
                            <li><code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Ctrl + Shift + H</code>
                                (вне поля ввода): Открыть/закрыть это окно "Горячие клавиши и управление Copilot".</li>
                        </ul>
                    </section>

                    <section>
                        <h3 class="text-lg font-semibold mb-3 border-b border-gray-300 dark:border-gray-600 pb-1">
                            Работа с окнами деталей и просмотра:</h3>
                        <p class="mb-2 text-gray-700 dark:text-gray-300">
                            Действия при открытой карточке элемента (алгоритма, регламента, заметки), списке скриншотов
                            или полноэкранном просмотре изображения:
                        </p>
                        <ul class="space-y-2.5 list-inside">
                            <li><code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Esc</code>:
                                <ul class="list-disc list-inside pl-5 mt-1 space-y-1">
                                    <li>В окне деталей элемента (например, карточка алгоритма): Закрыть окно деталей,
                                        вернуться к списку или предыдущему экрану.</li>
                                    <li>В окне просмотра списка скриншотов элемента (вьювер): Закрыть список скриншотов,
                                        а затем и окно деталей элемента.</li>
                                    <li>При полноэкранном просмотре изображения (лайтбокс): Закрыть изображение, список
                                        скриншотов (если был) и окно деталей элемента.</li>
                                    <li>В других модальных окнах (редактирование, настройки и т.д.): Закрыть текущее
                                        активное модальное окно.</li>
                                    <li>В любом поле поиска - удалить ввод и выйти из фокуса строки</li>
                                </ul>
                            </li>
                            <li><code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Backspace</code>:
                                <ul class="list-disc list-inside pl-5 mt-1 space-y-1">
                                    <li>В окне деталей элемента (например, карточка алгоритма): Закрыть окно деталей,
                                        вернуться к списку или предыдущему экрану.</li>
                                    <li>В окне просмотра списка скриншотов (вьювер): Закрыть список скриншотов,
                                        вернуться к окну деталей элемента.</li>
                                    <li>При полноэкранном просмотре изображения (лайтбокс): Закрыть изображение,
                                        вернуться к списку скриншотов (если он был открыт).</li>
                                </ul>
                            </li>
                        </ul>
                    </section>

                    <section>
                        <h3 class="text-lg font-semibold mb-3 border-b border-gray-300 dark:border-gray-600 pb-1">Работа
                            с Данными:</h3>
                        <ul class="space-y-2.5 list-inside">
                            <li><code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Alt + N</code>
                                (вне поля ввода): Открыть модальное окно добавления нового элемента для текущей секции.
                            </li>
                            <li><code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Alt + Shift + S</code>:
                                Экспорт всех данных приложения в JSON.</li>
                            <li><code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Alt + Shift + O</code>:
                                Открыть диалог выбора файла для импорта данных из JSON.</li>
                            <li>Поле "Данные по обращению клиента":
                                <ul class="list-disc list-inside pl-5 mt-1 space-y-1">
                                    <li><code
                                            class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Ctrl + Enter</code>
                                        (внутри поля): Вставить следующий пункт нумерованного списка.</li>
                                    <li><code
                                            class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Ctrl + Shift + Backspace</code>
                                        (вне поля ввода): Очистить поле (с подтверждением).</li>
                                    <li><code
                                            class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Ctrl + Shift + D</code>
                                        (вне поля ввода): Сохранить содержимое поля в .txt файл.</li>
                                </ul>
                            </li>
                        </ul>
                    </section>

                    <section>
                        <h3 class="text-lg font-semibold mb-3 border-b border-gray-300 dark:border-gray-600 pb-1">
                            Интерфейс:</h3>
                        <ul class="space-y-2.5 list-inside">
                            <li><code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Alt + T</code>
                                (вне поля ввода): Переключить цветовую тему приложения (Авто / Светлая / Темная).</li>
                        </ul>
                    </section>

                    <section>
                        <h3 class="text-lg font-semibold mb-3 border-b border-gray-300 dark:border-gray-600 pb-1">
                            Управление Таймером:
                        </h3>
                        <p class="mb-2.5 text-gray-700 dark:text-gray-300">
                            Взаимодействие с кнопками управления таймером:
                        </p>
                        <ul class="space-y-2.5 list-inside">
                            <li>
                                Нажатие на кнопку <i class="fas fa-play inline-block w-4 text-center"></i> / <i
                                    class="fas fa-pause inline-block w-4 text-center"></i> (Старт/Пауза): Запустить или
                                приостановить таймер.
                            </li>
                            <li>
                                Нажатие на кнопку <i class="fas fa-undo inline-block w-4 text-center"></i> (Сброс):
                                Сбросить таймер на значение по умолчанию (01:50).
                            </li>
                            <li>
                                <code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Ctrl</code>
                                + Нажатие на кнопку <i class="fas fa-undo inline-block w-4 text-center"></i> (Сброс):
                                Сбросить таймер на 00:00.
                            </li>
                            <li>
                                Нажатие на кнопку <i class="fas fa-plus-circle inline-block w-4 text-center"></i>
                                (Увеличить): Увеличить установленное/оставшееся время таймера на 30 секунд.
                            </li>
                            <li>
                                <code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Ctrl</code>
                                + Нажатие на кнопку <i class="fas fa-plus-circle inline-block w-4 text-center"></i>
                                (Увеличить): Увеличить установленное/оставшееся время таймера на 5 секунд.
                            </li>
                            <li>
                                Нажатие на кнопку <i class="fas fa-minus-circle inline-block w-4 text-center"></i>
                                (Уменьшить): Уменьшить установленное/оставшееся время таймера на 30 секунд.
                            </li>
                            <li>
                                <code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Ctrl</code>
                                + Нажатие на кнопку <i class="fas fa-minus-circle inline-block w-4 text-center"></i>
                                (Уменьшить): Уменьшить установленное/оставшееся время таймера на 5 секунд.
                            </li>
                        </ul>
                    </section>

                    <section>
                        <h3 class="text-lg font-semibold mb-3 border-b border-gray-300 dark:border-gray-600 pb-1">
                            Просмотр изображений (Лайтбокс и Вьювер):
                        </h3>
                        <p class="mb-1 text-gray-700 dark:text-gray-300">
                            При полноэкранном просмотре одного изображения (Лайтбокс):
                        </p>
                        <ul class="space-y-2.5 list-inside mb-3">
                            <li><code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono"><i class="fas fa-arrow-left inline-block w-3 text-center"></i></code>
                                / <code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono"><i class="fas fa-arrow-right inline-block w-3 text-center"></i></code>
                                (клавиши со стрелками): Предыдущее / следующее изображение.</li>
                            <li>Колесо мыши (или жесты touchpad): Масштабирование изображения.</li>
                            <li>Перетаскивание мышью (при увеличенном масштабе): Панорамирование изображения.</li>
                            <li><code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Tab</code>
                                / <code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Shift + Tab</code>:
                                Переключение между кнопками управления в полноэкранном режиме.</li>
                        </ul>
                        <p class="mb-1 text-gray-700 dark:text-gray-300">
                            В окне просмотра списка скриншотов элемента (Вьювер):
                        </p>
                        <ul class="space-y-2.5 list-inside">
                            <li><code
                                    class="bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs font-mono">Alt + V</code>:
                                Переключить вид отображения скриншотов (сетка/список).</li>
                        </ul>
                    </section>

                </div>

                <div class="p-4 border-t border-gray-200 dark:border-gray-700 mt-auto flex-shrink-0 text-right">
                    <button type="button" id="okHotkeysModalBtn"
                        class="px-5 py-2 bg-primary hover:bg-secondary text-white rounded-md transition">
                        OK
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="screenshotLightbox" tabindex="-1"
        class="fixed inset-0 bg-black bg-opacity-80 hidden z-[90] p-4 flex items-center justify-center backdrop-blur-sm overflow-hidden">
        <div class="relative w-full h-full flex items-center justify-center">
            <img id="lightboxImage" src="" alt="Просмотр скриншота"
                class="max-w-[95%] max-h-[95%] object-contain hidden cursor-grab active:cursor-grabbing"
                style="transition: transform 0.1s ease-out; transform-origin: center center;">

            <div id="lightboxCounter"
                class="absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white text-sm bg-black bg-opacity-50 px-2 py-1 rounded z-20">
                1 / 1
            </div>
            <button id="closeLightboxBtn"
                class="absolute top-4 right-4 text-white text-3xl opacity-80 hover:opacity-100 transition-opacity focus:outline-none focus:shadow-none z-20"
                title="Закрыть (Esc)">
                ×
            </button>
            <button id="prevLightboxBtn"
                class="absolute left-4 top-1/2 transform -translate-y-1/2 text-white text-3xl opacity-50 hover:opacity-100 transition-opacity focus:outline-none p-2 bg-black bg-opacity-30 rounded-full z-20 disabled:opacity-20 disabled:cursor-not-allowed"
                title="Предыдущее (←)">
                ‹
            </button>
            <button id="nextLightboxBtn"
                class="absolute right-4 top-1/2 transform -translate-y-1/2 text-white text-3xl opacity-50 hover:opacity-100 transition-opacity focus:outline-none p-2 bg-black bg-opacity-30 rounded-full z-20 disabled:opacity-20 disabled:cursor-not-allowed"
                title="Следующее (→)">
                ›
            </button>
        </div>
    </div>


    <div id="app-copyright" class="p-3 text-center text-2xs">
        Copilot 1CO by <a href="https://t.me/guthleifur" target="_blank" rel="noopener noreferrer"
            class="hover:underline">@guthleifur</a> - репорт об ошибках и предложения по усовершенстованию
    </div>



    <script defer src="./script.js"></script>
</body>

</html>
